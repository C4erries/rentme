## Общий план развития Rentme (до 10 задач)

Этот план — дорожная карта по интеграции ML‑прайсинга и доведению проекта до полноценного учебного маркетплейса аренды жилья (краткосрочная/посуточная и долгосрочная аренда).

### Статус
- [x] 1) Listing: доменная модель + UX мастера (region, max_nights=0, кликабельные шаги, фиксы publish/price suggestion)
- [x] 2) ML pricing: раздельные модели short_term/long_term + раздельные датасеты + интеграция в backend + генерация/seed демо‑данных
- [x] 3) Фото: загрузка фото объявлений через S3‑совместимое хранилище (MinIO) + интеграция end‑to‑end
- [x] 4) Бронирование: создание заказа/брони (booking) + базовый UX для гостя
- [x] 5) Лендинг и отзывы: рабочие страницы/ссылки «Как это работает»/«Истории гостей» + система отзывов end‑to‑end
- [x] 6) Мессенджер (отдельный сервис): gRPC + ScyllaDB (история чатов), без событийной архитектуры
- [ ] 7) Уведомления: оповещения о новых сообщениях (простая реализация, без Kafka)
- [ ] 8) Админка: список пользователей + админ‑чат с пользователями + метрики ML‑моделей
- [ ] 9) Docker Compose: все сервисы через compose, убрать Kafka/лишнее, добавить messaging‑service + Scylla
- [ ] 10) Полировка: валидации, ошибки/логи, документация, базовые тесты/скрипты

---

### 1) Listing: доменная модель + UX мастера (сделано)
- `MaxNights=0` трактуется как «без ограничений», корректная валидация диапазона ночей.
- Поле `Region` вместо `Country` в адресе (страна убрана из UI; регион обязателен при публикации).
- Кликабельные шаги мастера создания объявления; устранён кейс `listing not selected` при обновлении цены.
- Приведены DTO/типы фронта и бэка к единому набору полей (этаж/этажность/ремонт/возраст дома/площадь и т.д.).

### 2) ML pricing: short_term и long_term (сделано)
- В домене/DTO/каталоге добавлен `RentalTermType` (`short_term`/`long_term`).
- ML‑сервис загружает обе модели и принимает `rental_term` (по умолчанию — `long_term` для обратной совместимости).
- Датасеты разделены:
  - `mlrent/clean_train_long.csv` + `mlrent/clean_test_long.csv` (90%/10%);
  - `mlrent/clean_train_short.csv` + `mlrent/clean_test_short.csv` (синтетика для посуточной).
- Добавлен сидер демо‑данных: несколько арендодателей (агентства/частники) и ~30 short_term + ~30 long_term объявлений, параметры похожи на CSV.

### 3) Фото: MinIO/S3 (сделано)
- Поднят MinIO в `docker-compose.yml`.
- Backend: загрузка фото (multipart) и сохранение публичных URL, первое фото — `ThumbnailURL`.
- Frontend: шаг с фото в мастере, загрузка файла, предпросмотр/обложка.

### 4) Бронирование (сделано)
- Backend: создание брони использует текущего авторизованного пользователя (guest), базовые проверки дат.
- Frontend: UX выбора дат/гостей и создание брони из карточки объявления, переход в «Мои брони».

### 5) Лендинг + отзывы (следующая задача)
- Сделать навигацию по лендингу «Как это работает» и «Истории гостей» реально рабочей.
- Реализовать отзывы end‑to‑end:
  - создание отзыва гостем (привязка к booking/listing),
  - вывод отзывов у объявления,
  - агрегирование рейтинга в `Listing.Rating`.

### 6) Мессенджер (gRPC + Scylla) (план)
- Отдельный сервис `messaging-service`, хранит историю в ScyllaDB.
- Основной backend (Mongo) общается с мессенджером по gRPC.
- Для каждого объявления есть `HostID`, чтобы можно было написать арендодателю.

### 7) Уведомления (план)
- Минимальная система оповещений о новых сообщениях без Kafka (polling/WebSocket — по месту).

### 8) Админка (план)
- Список пользователей + встроенный админ‑чат (как у пользователей: выбрать пользователя и написать).
- Метрики моделей ML (хотя бы качество на test + базовые stats).

### 9) Docker Compose (план)
- Привести запуск к «всё через compose»: backend, frontend, ML, Mongo, MinIO, Scylla, messaging‑service.
- Убрать Kafka и связанный код/конфиги, так как событийная архитектура не используется.

### 10) Полировка (план)
- Доработка UX, валидаций, логов, документации; стабилизация флоу публикации/бронирования/фото/цен.
