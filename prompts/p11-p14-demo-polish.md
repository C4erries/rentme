# Prompt: добить демо‑готовность (пункты 11 и 14)

Ты один агент‑разработчик. Цель — довести UI/UX до состояния “демо без подсказок” и закрыть оставшиеся пункты плана: **11 (личный кабинет гостя)** и **14 (UX‑полировка)**.

## Перед началом (обязательно)

Прочитай и следуй:
- `AGENTS.md` (архитектура/ограничения)
- `plan.md` (что считается готовым)
- `demo.md` (смоук‑сценарии)
- `domain_model.md` (сущности и термины)

## Контекст (уже сделано)

- Деньги: **рубли везде**, `rate_rub`, `price_unit`.
- Long/short booking, подтверждение у хоста, чат по брони — уже реализовано.
- ML: `way=transit`, клампы, uplift ремонта — уже реализовано.

## Задача

### 1) Пункт 11: Личный кабинет гостя (P0)

Сделай “Личный кабинет” гостя таким, чтобы он был полезным центром навигации, а не просто страницей:

- Раздел “Мои брони”:
  - группировка: предстоящие / прошлые / отменённые (можно табами/секциями).
  - на карточке брони: статус (понятным текстом), сумма, `price_unit`, для `long_term` показывать `months`.
  - CTA: “Перейти в чат” (если ещё не везде) и “Оставить отзыв” (если доступно).

- Деталка брони (если есть отдельная страница/модалка):
  - даты (для long_term — показывать только start + months, а не “выезд как в short_term”);
  - ссылка на объявление;
  - CTA: чат с контрагентом.

- Раздел “Сообщения”:
  - быстрый переход в список диалогов (`/me/chats`) и/или конкретный диалог.

- Раздел “Отзывы”:
  - показать “нужно оставить отзыв” для завершённых броней без отзыва;
  - не нужно сложной логики, главное — понятный CTA и пустые состояния.

Acceptance:
- “Мои брони” не ломается при пустом списке; нет “белых экранов”.
- Для каждой брони есть путь в чат.
- Для long_term брони не показываем ввод “дата выезда” как обязательный UX.

### 2) Пункт 14: UX‑полировка (P0 → P1)

#### P0: empty/loading/error states (обязательно)

Приведи к единому стандарту состояния:
- Catalog, Listing modal/preview, Chat, Guest bookings, Host bookings, Admin pages.

Требования:
- Loading: скелетоны/спиннер + текст.
- Empty: понятное сообщение + CTA (“Перейти в каталог”, “Создать объявление”, “Написать…”).
- Error: человеческий текст, без raw stack/JSON; по 401/403/404/5xx.

#### P0: навигация (обязательно)

В шапке/меню должны быть очевидные входы:
- “Каталог”
- “Мои брони”
- “Сообщения”
- “Профиль/ЛК”
- Для host: “Мои объявления”, “Запросы на бронь”

#### P1: микрокопирайтинг и адаптив

- Привести ключевые тексты к одному стилю (RU), без “заглушек”.
- Проверить мобильный UX (360px): каталог, карточка/модалка объявления, чат, брони.

Acceptance:
- По `demo.md` смоук можно пройти без объяснений.
- Нигде не торчат “сырые” ошибки, нет элементов, которые не помещаются на экран.

## Проверка (обязательно)

1) `docker compose up -d --build`
2) Пройти `demo.md` целиком:
   - guest: каталог -> карточка -> бронь (short+long) -> чат -> “мои брони”
   - host: увидеть pending -> подтвердить -> чат
   - admin: список пользователей, метрики ML
3) Деградации:
   - `docker compose stop mlpricing` и `docker compose stop messaging-service` по очереди
   - убедиться, что UI показывает понятные ошибки, backend не падает.

## Отчёт в конце

- Какие страницы/компоненты трогал (файлы).
- Что изменил в навигации и состояниях.
- Короткий чек‑лист “что руками проверить перед показом”.

